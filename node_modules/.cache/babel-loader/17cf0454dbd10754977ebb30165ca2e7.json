{"remainingRequest":"E:\\学习软件\\Vue项目\\Vue实战\\jingdong\\node_modules\\thread-loader\\dist\\cjs.js!E:\\学习软件\\Vue项目\\Vue实战\\jingdong\\node_modules\\babel-loader\\lib\\index.js!E:\\学习软件\\Vue项目\\Vue实战\\jingdong\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!E:\\学习软件\\Vue项目\\Vue实战\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\学习软件\\Vue项目\\Vue实战\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\学习软件\\Vue项目\\Vue实战\\jingdong\\src\\views\\shop\\Content.vue?vue&type=template&id=773c02bc&scoped=true","dependencies":[{"path":"E:\\学习软件\\Vue项目\\Vue实战\\jingdong\\src\\views\\shop\\Content.vue","mtime":1607158761000},{"path":"E:\\学习软件\\Vue项目\\Vue实战\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\学习软件\\Vue项目\\Vue实战\\jingdong\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\学习软件\\Vue项目\\Vue实战\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\学习软件\\Vue项目\\Vue实战\\jingdong\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1628298225000},{"path":"E:\\学习软件\\Vue项目\\Vue实战\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\学习软件\\Vue项目\\Vue实战\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IHJlbmRlckxpc3QgYXMgX3JlbmRlckxpc3QsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZywgbm9ybWFsaXplQ2xhc3MgYXMgX25vcm1hbGl6ZUNsYXNzLCBjcmVhdGVFbGVtZW50Vk5vZGUgYXMgX2NyZWF0ZUVsZW1lbnRWTm9kZSwgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIHdpdGhTY29wZUlkIGFzIF93aXRoU2NvcGVJZCwgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCl9wdXNoU2NvcGVJZCgiZGF0YS12LTc3M2MwMmJjIik7Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogImNvbnRlbnQiCn07CnZhciBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAiY2F0ZWdvcnkiCn07CnZhciBfaG9pc3RlZF8zID0gWyJvbkNsaWNrIl07CnZhciBfaG9pc3RlZF80ID0gewogIGNsYXNzOiAicHJvZHVjdCIKfTsKdmFyIF9ob2lzdGVkXzUgPSBbInNyYyJdOwp2YXIgX2hvaXN0ZWRfNiA9IHsKICBjbGFzczogInByb2R1Y3RfX2l0ZW1fX2RldGFpbCIKfTsKdmFyIF9ob2lzdGVkXzcgPSB7CiAgY2xhc3M6ICJwcm9kdWN0X19pdGVtX190aXRsZSIKfTsKdmFyIF9ob2lzdGVkXzggPSB7CiAgY2xhc3M6ICJwcm9kdWN0X19pdGVtX19zYWxlcyIKfTsKdmFyIF9ob2lzdGVkXzkgPSB7CiAgY2xhc3M6ICJwcm9kdWN0X19pdGVtX19wcmljZSIKfTsKCnZhciBfaG9pc3RlZF8xMCA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgewogIGNsYXNzOiAicHJvZHVjdF9faXRlbV9feWVuIgp9LCAiwqUiLCAtMSk7Cgp2YXIgX2hvaXN0ZWRfMTEgPSB7CiAgY2xhc3M6ICJwcm9kdWN0X19pdGVtX19vcmlnaW4iCn07CnZhciBfaG9pc3RlZF8xMiA9IHsKICBjbGFzczogInByb2R1Y3RfX251bWJlciIKfTsKdmFyIF9ob2lzdGVkXzEzID0gWyJvbkNsaWNrIl07CnZhciBfaG9pc3RlZF8xNCA9IFsib25DbGljayJdOwoKX3BvcFNjb3BlSWQoKTsKCmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzIsIFsoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KCRzZXR1cC5jYXRlZ29yaWVzLCBmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgewogICAgICBjbGFzczogX25vcm1hbGl6ZUNsYXNzKHsKICAgICAgICAnY2F0ZWdvcnlfX2l0ZW0nOiB0cnVlLAogICAgICAgICdjYXRlZ29yeV9faXRlbS0tYWN0aXZlJzogJHNldHVwLmN1cnJlbnRUYWIgPT09IGl0ZW0udGFiCiAgICAgIH0pLAogICAgICBrZXk6IGl0ZW0ubmFtZSwKICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICByZXR1cm4gJHNldHVwLmhhbmRsZVRhYkNsaWNrKGl0ZW0udGFiKTsKICAgICAgfQogICAgfSwgX3RvRGlzcGxheVN0cmluZyhpdGVtLm5hbWUpLCAxMSwgX2hvaXN0ZWRfMyk7CiAgfSksIDEyOCkpXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzQsIFsoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KCRzZXR1cC5saXN0LCBmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgewogICAgICBjbGFzczogInByb2R1Y3RfX2l0ZW0iLAogICAgICBrZXk6IGl0ZW0uX2lkCiAgICB9LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaW1nIiwgewogICAgICBjbGFzczogInByb2R1Y3RfX2l0ZW1fX2ltZyIsCiAgICAgIHNyYzogaXRlbS5pbWdVcmwKICAgIH0sIG51bGwsIDgsIF9ob2lzdGVkXzUpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF82LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaDQiLCBfaG9pc3RlZF83LCBfdG9EaXNwbGF5U3RyaW5nKGl0ZW0ubmFtZSksIDEpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJwIiwgX2hvaXN0ZWRfOCwgIuaciOWUriAiICsgX3RvRGlzcGxheVN0cmluZyhpdGVtLnNhbGVzKSArICIg5Lu2IiwgMSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoInAiLCBfaG9pc3RlZF85LCBbX2hvaXN0ZWRfMTAsIF9jcmVhdGVUZXh0Vk5vZGUoX3RvRGlzcGxheVN0cmluZyhpdGVtLnByaWNlKSArICIgIiwgMSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBfaG9pc3RlZF8xMSwgIsKlIiArIF90b0Rpc3BsYXlTdHJpbmcoaXRlbS5vbGRQcmljZSksIDEpXSldKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMTIsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgewogICAgICBjbGFzczogInByb2R1Y3RfX251bWJlcl9fbWludXMgaWNvbmZvbnQiLAogICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICRzZXR1cC5jaGFuZ2VDYXJ0SXRlbSgkc2V0dXAuc2hvcElkLCBpdGVtLl9pZCwgaXRlbSwgLTEsICRwcm9wcy5zaG9wTmFtZSk7CiAgICAgIH0KICAgIH0sICLumpEiLCA4LCBfaG9pc3RlZF8xMyksIF9jcmVhdGVUZXh0Vk5vZGUoIiAiICsgX3RvRGlzcGxheVN0cmluZygkc2V0dXAuZ2V0UHJvZHVjdENhcnRDb3VudCgkc2V0dXAuc2hvcElkLCBpdGVtLl9pZCkpICsgIiAiLCAxKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIHsKICAgICAgY2xhc3M6ICJwcm9kdWN0X19udW1iZXJfX3BsdXMgaWNvbmZvbnQiLAogICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICRzZXR1cC5jaGFuZ2VDYXJ0SXRlbSgkc2V0dXAuc2hvcElkLCBpdGVtLl9pZCwgaXRlbSwgMSwgJHByb3BzLnNob3BOYW1lKTsKICAgICAgfQogICAgfSwgIu6ZqCIsIDgsIF9ob2lzdGVkXzE0KV0pXSk7CiAgfSksIDEyOCkpXSldKTsKfQ=="},{"version":3,"sources":["E:\\学习软件\\Vue项目\\Vue实战\\jingdong\\src\\views\\shop\\Content.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"category\">\n      <div\n        :class=\"{'category__item': true, 'category__item--active': currentTab === item.tab}\"\n        v-for=\"item in categories\"\n        :key=\"item.name\"\n        @click=\"() => handleTabClick(item.tab)\"\n      >\n        {{item.name}}\n      </div>\n    </div>\n    <div class=\"product\">\n      <div\n        class=\"product__item\"\n        v-for=\"item in list\"\n        :key=\"item._id\"\n      >\n        <img class=\"product__item__img\" :src=\"item.imgUrl\" />\n        <div class=\"product__item__detail\">\n          <h4 class=\"product__item__title\">{{item.name}}</h4>\n          <p class=\"product__item__sales\">月售 {{item.sales}} 件</p>\n          <p class=\"product__item__price\">\n            <span class=\"product__item__yen\">&yen;</span>{{item.price}}\n            <span class=\"product__item__origin\">&yen;{{item.oldPrice}}</span>\n          </p>\n        </div>\n        <div class=\"product__number\">\n          <span\n            class=\"product__number__minus iconfont\"\n            @click=\"() => { changeCartItem(shopId, item._id, item, -1, shopName) }\"\n          >&#xe691;</span>\n            {{getProductCartCount(shopId, item._id)}}\n          <span\n            class=\"product__number__plus iconfont\"\n            @click=\"() => { changeCartItem(shopId, item._id, item, 1, shopName) }\"\n          >&#xe668;</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, ref, toRefs, watchEffect } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { get } from '../../utils/request'\nimport { useCommonCartEffect } from '../../effects/cartEffects'\n\nconst categories = [\n  { name: '全部商品', tab: 'all' },\n  { name:'秒杀', tab: 'seckill' },\n  { name: '新鲜水果', tab: 'fruit'}\n]\n\n// Tab 切换相关的逻辑\nconst useTabEffect = () => {\n  const currentTab = ref(categories[0].tab)\n  const handleTabClick = (tab) => {\n    currentTab.value = tab\n  }\n  return { currentTab, handleTabClick}\n}\n\n// 列表内容相关的逻辑\nconst useCurrentListEffect = (currentTab, shopId) => {\n  const content = reactive({ list: [] })\n  const getContentData = async () => {\n    const result = await get(`/api/shop/${shopId}/products`, {\n      tab: currentTab.value\n    })\n    if(result?.errno === 0 && result?.data?.length) {\n      content.list = result.data;\n    }\n  }\n  watchEffect(() => { getContentData() })\n  const { list } = toRefs(content)\n  return { list }\n}\n\n// 购物车相关逻辑\nconst useCartEffect = () => {\n  const store = useStore()\n  const { cartList, changeCartItemInfo } = useCommonCartEffect()\n  const changeShopName = (shopId, shopName) => {\n    store.commit('changeShopName', { shopId, shopName })\n  }\n  const changeCartItem = (shopId, productId, item, num, shopName) => {\n    changeCartItemInfo(shopId, productId, item, num)\n    changeShopName(shopId, shopName)\n  }\n  const getProductCartCount = (shopId, productId) => {\n    return cartList?.[shopId]?.productList?.[productId]?.count || 0\n  }\n  return { cartList, changeCartItem, getProductCartCount }\n}\n\nexport default {\n  name: 'Content',\n  props: ['shopName'],\n  setup() {\n    const route = useRoute()\n    const shopId = route.params.id\n    const { currentTab, handleTabClick } = useTabEffect()\n    const { list } = useCurrentListEffect(currentTab, shopId)\n    const { changeCartItem, cartList, getProductCartCount } = useCartEffect()\n    return {\n      categories, currentTab, handleTabClick, list,\n      shopId, changeCartItem, cartList, getProductCartCount\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../style/viriables.scss';\n@import '../../style/mixins.scss';\n.content {\n  display: flex;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 1.5rem;\n  bottom: .5rem;\n}\n.category {\n  overflow-y: scroll;\n  height: 100%;\n  width: .76rem;\n  background: $search-bgColor;\n  &__item {\n    line-height: .4rem;\n    text-align: center;\n    font-size: .14rem;\n    color: #333;\n    &--active {\n      background: $bgColor;\n    }\n  }\n}\n.product {\n  overflow-y: scroll;\n  flex: 1;\n  &__item {\n    position: relative;\n    display: flex;\n    padding: .12rem 0;\n    margin: 0 .16rem;\n    border-bottom: .01rem solid $content-bgColor;\n    &__detail {\n      overflow: hidden;\n    }\n    &__img {\n      width: .68rem;\n      height: .68rem;\n      margin-right: .16rem;\n    }\n    &__title {\n      margin: 0;\n      line-height: .2rem;\n      font-size: .14rem;\n      color: $content-fontcolor;\n      @include ellipsis;\n    }\n    &__sales {\n      margin: .06rem 0;\n      font-size: .12rem;\n      color: $content-fontcolor;\n    }\n    &__price {\n      margin: 0;\n      line-height: .2rem;\n      font-size: .14rem;\n      color: $hightlight-fontColor;\n    }\n    &__yen {\n      font-size: .12rem;\n    }\n    &__origin {\n      margin-left: .06rem;\n      line-height: .2rem;\n      font-size: .12rem;\n      color: $light-fontColor;\n      text-decoration: line-through;\n    }\n    .product__number {\n      position: absolute;\n      right: 0;\n      bottom: .12rem;\n      line-height: .18rem;\n      &__minus {\n        position:relative;\n        top: .02rem;\n        color: $medium-fontColor;\n        margin-right: .05rem;\n      }\n      &__plus {\n        position:relative;\n        top: .02rem;\n        color: $btn-bgColor;\n        margin-left: .05rem;\n      }\n    }\n  }\n  \n}\n</style>\n"],"sourceRoot":""}]}