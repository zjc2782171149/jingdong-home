(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orderConfirmation"],{1148:function(t,e,c){"use strict";var r=c("a691"),n=c("577e"),a=c("1d80");t.exports=function(t){var e=n(a(this)),c="",i=r(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(c+=e);return c}},"19e9":function(t,e,c){"use strict";var r=c("1da1"),n=(c("96cf"),c("5502")),a=c("b775"),i=function(){var t=Object(n["b"])(),e=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(c){var r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state.addressList,!c&&r.length){e.next=6;break}return e.next=4,Object(a["a"])("/api/user/address");case 4:i=e.sent,null!==i&&void 0!==i&&null!==(n=i.data)&&void 0!==n&&n.length&&t.commit("changeAddressList",i.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getAddressList:e}};e["a"]=i},"3dc5":function(t,e,c){"use strict";c("e798")},"3f98":function(t,e,c){},"408a":function(t,e,c){var r=c("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},"4bf6":function(t,e,c){},"501c":function(t,e,c){"use strict";c("6aa8")},"6aa8":function(t,e,c){},"75c9":function(t,e,c){"use strict";c.d(e,"a",(function(){return a}));c("b680");var r=c("7a23"),n=c("5502"),a=function(t){var e=Object(n["b"])(),c=e.state.cartList,a=function(t,c,r,n){e.commit("changeCartItemInfo",{shopId:t,productId:c,productInfo:r,num:n})},i=Object(r["b"])((function(){var e,r=(null===(e=c[t])||void 0===e?void 0:e.productList)||{},n={};for(var a in r){var i=r[a];i.count>0&&(n[a]=i)}return n})),o=Object(r["b"])((function(){var e,r=(null===(e=c[t])||void 0===e?void 0:e.shopName)||"";return r})),s=Object(r["b"])((function(){var e,r=null===(e=c[t])||void 0===e?void 0:e.productList,n={total:0,price:0,allChecked:!0};if(r)for(var a in r){var i=r[a];n.total+=i.count,i.check&&(n.price+=i.count*i.price),i.count>0&&!i.check&&(n.allChecked=!1)}return n.price=n.price.toFixed(2),n}));return{cartList:c,shopName:o,productList:i,calculations:s,changeCartItemInfo:a}}},"7db0":function(t,e,c){"use strict";var r=c("23e7"),n=c("b727").find,a=c("44d2"),i="find",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a(i)},b680:function(t,e,c){"use strict";var r=c("23e7"),n=c("a691"),a=c("408a"),i=c("1148"),o=c("d039"),s=1..toFixed,d=Math.floor,u=function(t,e,c){return 0===e?c:e%2===1?u(t,e-1,c*t):u(t*t,e/2,c)},l=function(t){var e=0,c=t;while(c>=4096)e+=12,c/=4096;while(c>=2)e+=1,c/=2;return e},b=function(t,e,c){var r=-1,n=c;while(++r<6)n+=e*t[r],t[r]=n%1e7,n=d(n/1e7)},f=function(t,e){var c=6,r=0;while(--c>=0)r+=t[c],t[c]=d(r/e),r=r%e*1e7},_=function(t){var e=6,c="";while(--e>=0)if(""!==c||0===e||0!==t[e]){var r=String(t[e]);c=""===c?r:c+i.call("0",7-r.length)+r}return c},p=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){s.call({})}));r({target:"Number",proto:!0,forced:p},{toFixed:function(t){var e,c,r,o,s=a(this),d=n(t),p=[0,0,0,0,0,0],O="",v="0";if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(O="-",s=-s),s>1e-21)if(e=l(s*u(2,69,1))-69,c=e<0?s*u(2,-e,1):s/u(2,e,1),c*=4503599627370496,e=52-e,e>0){b(p,0,c),r=d;while(r>=7)b(p,1e7,0),r-=7;b(p,u(10,r,1),0),r=e-1;while(r>=23)f(p,1<<23),r-=23;f(p,1<<r),b(p,1,1),f(p,2),v=_(p)}else b(p,0,c),b(p,1<<-e,0),v=_(p)+i.call("0",d);return d>0?(o=v.length,v=O+(o<=d?"0."+i.call("0",d-o)+v:v.slice(0,o-d)+"."+v.slice(o-d))):v=O+v,v}})},b957:function(t,e,c){"use strict";c.r(e);var r=c("7a23");Object(r["w"])("data-v-1bad0ca6");var n={class:"wrapper"};function a(t,e,c,a,i,o){var s=Object(r["A"])("TopArea"),d=Object(r["A"])("ProductList"),u=Object(r["A"])("Order");return Object(r["t"])(),Object(r["f"])("div",n,[Object(r["j"])(s),Object(r["j"])(d),Object(r["j"])(u)])}Object(r["u"])();var i=c("19e9");c("b0c0");Object(r["w"])("data-v-275476f1");var o={class:"top"},s={class:"top__header"},d=Object(r["i"])(" 确认订单 "),u={class:"top__receiver"},l=Object(r["g"])("div",{class:"top__receiver__title"},"收货地址",-1),b={class:"top__receiver__address"},f={class:"top__receiver__info"},_={class:"top__receiver__info__name"},p={class:"top__receiver__info__name"},O=Object(r["g"])("div",{class:"iconfont top__receiver__icon"},"",-1),v={key:1},j=Object(r["g"])("div",{class:"top__receiver__address"}," 暂无可用地址 ",-1),h=[j];function m(t,e,c,n,a,i){return Object(r["t"])(),Object(r["f"])("div",o,[Object(r["g"])("div",s,[Object(r["g"])("div",{class:"iconfont top__header__back",onClick:e[0]||(e[0]=function(){return n.handleBackClick&&n.handleBackClick.apply(n,arguments)})},""),d]),Object(r["g"])("div",u,[l,n.address?(Object(r["t"])(),Object(r["f"])("div",{key:0,onClick:e[1]||(e[1]=function(){return n.handleAddressClick&&n.handleAddressClick.apply(n,arguments)})},[Object(r["g"])("div",b,Object(r["C"])(n.address.city)+Object(r["C"])(n.address.department)+Object(r["C"])(n.address.houseNumber),1),Object(r["g"])("div",f,[Object(r["g"])("span",_,Object(r["C"])(n.address.name),1),Object(r["g"])("span",p,Object(r["C"])(n.address.phone),1)]),O])):(Object(r["t"])(),Object(r["f"])("div",v,h))])])}Object(r["u"])();var g=c("6c02"),C=(c("7db0"),c("5502")),k=function(){var t=Object(g["c"])(),e=t.params.addressId,c=Object(r["b"])((function(){var t=Object(C["b"])(),c=t.state.addressList;return c.find((function(t){return t._id===e}))||c[0]}));return c},w=k,L={name:"TopArea",setup:function(){var t=Object(g["d"])(),e=Object(g["c"])(),c=e.params.id,r=function(){t.back()},n=function(){t.push("/chooseAddressList/".concat(c))},a=w();return{handleBackClick:r,handleAddressClick:n,address:a}}};c("501c");L.render=m,L.__scopeId="data-v-275476f1";var x=L;c("b680");Object(r["w"])("data-v-51236a8a");var y={class:"products"},I={class:"products__title"},A={class:"products__wrapper"},N={class:"products__list"},F=["src"],S={class:"products__item__detail"},R={class:"products__item__title"},T={class:"products__item__price"},B=Object(r["g"])("span",{class:"products__item__yen"},"¥ ",-1),E={class:"products__item__total"},P=Object(r["g"])("span",{class:"products__item__yen"},"¥ ",-1);function J(t,e,c,n,a,i){return Object(r["t"])(),Object(r["f"])("div",y,[Object(r["g"])("div",I,Object(r["C"])(n.shopName),1),Object(r["g"])("div",A,[Object(r["g"])("div",N,[(Object(r["t"])(!0),Object(r["f"])(r["a"],null,Object(r["z"])(n.productList,(function(t){return Object(r["t"])(),Object(r["f"])("div",{key:t._id,class:"products__item"},[Object(r["g"])("img",{class:"products__item__img",src:t.imgUrl},null,8,F),Object(r["g"])("div",S,[Object(r["g"])("h4",R,Object(r["C"])(t.name),1),Object(r["g"])("p",T,[Object(r["g"])("span",null,[B,Object(r["i"])(" "+Object(r["C"])(t.price)+" x "+Object(r["C"])(t.count),1)]),Object(r["g"])("span",E,[P,Object(r["i"])(" "+Object(r["C"])((t.price*t.count).toFixed(2)),1)])])])])})),128))])])])}Object(r["u"])();var z=c("75c9"),D={name:"ProductList",setup:function(){var t=Object(g["c"])(),e=t.params.id,c=Object(z["a"])(e),r=c.shopName,n=c.productList;return{shopName:r,productList:n}}};c("f901");D.render=J,D.__scopeId="data-v-51236a8a";var G=D;Object(r["w"])("data-v-13c85c26");var K={class:"order"},M={class:"order__price"},U=Object(r["i"])("实付金额 "),W=Object(r["g"])("h3",{class:"mask__content__title"},"确认要离开收银台？",-1),q=Object(r["g"])("p",{class:"mask__content__desc"},"请尽快完成支付，否则将被取消",-1),H={class:"mask__content__btns"};function Q(t,e,c,n,a,i){return Object(r["t"])(),Object(r["f"])(r["a"],null,[Object(r["g"])("div",K,[Object(r["g"])("div",M,[U,Object(r["g"])("b",null,"¥"+Object(r["C"])(n.calculations.price),1)]),n.address?(Object(r["t"])(),Object(r["f"])("div",{key:0,class:"order__btn",onClick:e[0]||(e[0]=function(){return n.handleShowConfirmChange(!0)})},"提交订单")):Object(r["e"])("",!0)]),Object(r["K"])(Object(r["g"])("div",{class:"mask",onClick:e[4]||(e[4]=function(){return n.handleShowConfirmChange(!1)})},[Object(r["g"])("div",{class:"mask__content",onClick:e[3]||(e[3]=Object(r["L"])((function(){}),["stop"]))},[W,q,Object(r["g"])("div",H,[Object(r["g"])("div",{class:"mask__content__btn mask__content__btn--first",onClick:e[1]||(e[1]=function(){return n.handleConfirmOrder(!0)})},"取消订单"),Object(r["g"])("div",{class:"mask__content__btn mask__content__btn--last",onClick:e[2]||(e[2]=function(){return n.handleConfirmOrder(!1)})},"确认支付")])])],512),[[r["G"],n.showConfirm]])],64)}Object(r["u"])();var V=c("1da1"),X=(c("96cf"),c("b775")),Y=function(t,e,c,r){var n=Object(g["d"])(),a=Object(C["b"])(),i=function(){var i=Object(V["a"])(regeneratorRuntime.mark((function i(o){var s,d,u,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:for(d in s=[],c.value)u=c.value[d],s.push({id:u._id,num:u.count});return i.prev=2,i.next=5,Object(X["c"])("/api/order",{addressId:r.value._id,shopId:t,shopName:e.value,isCanceled:o,products:s});case 5:l=i.sent,0===(null===l||void 0===l?void 0:l.errno)&&(a.commit("clearCartData11",t),n.push({name:"OrderList"})),i.next=11;break;case 9:i.prev=9,i.t0=i["catch"](2);case 11:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(t){return i.apply(this,arguments)}}();return{handleConfirmOrder:i}},Z=function(){var t=Object(r["y"])(!1),e=function(e){t.value=e};return{showConfirm:t,handleShowConfirmChange:e}},$={name:"Order",setup:function(){var t=Object(g["c"])(),e=t.params.id,c=w(),r=Object(z["a"])(e),n=r.calculations,a=r.shopName,i=r.productList,o=Y(e,a,i,c),s=o.handleConfirmOrder,d=Z(),u=d.showConfirm,l=d.handleShowConfirmChange;return{address:c,showConfirm:u,handleShowConfirmChange:l,calculations:n,handleConfirmOrder:s}}};c("3dc5");$.render=Q,$.__scopeId="data-v-13c85c26";var tt=$,et={name:"OrderConfirmation",components:{TopArea:x,ProductList:G,Order:tt},setup:function(){var t=Object(i["a"])(),e=t.getAddressList;e()}};c("d9a2");et.render=a,et.__scopeId="data-v-1bad0ca6";e["default"]=et},d9a2:function(t,e,c){"use strict";c("3f98")},e798:function(t,e,c){},f901:function(t,e,c){"use strict";c("4bf6")}}]);
//# sourceMappingURL=orderConfirmation.ec6562dc.js.map